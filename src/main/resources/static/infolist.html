<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>info</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" href="css/infolist.css">

</head>
<body>
    <nav id="header"></nav>
    <div class="layui-container" id="context_container">
        <div class="layui-row layui-col-space10" id="infoList">

        </div>
    </div>
    <footer id="footer"></footer>
    <script src="layui/layui.all.js"></script>
    <script src="/static/js/common/Constant.js"></script>
    <script>
        $ = layui.$;
        $("#header").load("/nav");
        $("#footer").load("/footer");
        let constant = getConstant();
        $.get("/api/info/allinfo",(data) => {
            let res = data.data;
            $.each(res, function (index, item) {
                $('#infoList').append(renderInfoList(item));
            })
        }).fail((err,data)=>{
            $('#infoList').append(errplane());
        });
        function renderInfoList(item) {
            let data ="<div class= 'layui-col-md12'><figure><img src='img/demo/download.jpg'><figcaption><p>"+item.title+"</p></figcaption><a href='../info?infoId="+item.infoId+"'></a></figure></div>";
            return data;
        }
        function errplane() {
            let data = "<div><p style='font-size: 40px;text-align: center'>"+constant.err.ERROR_INFO+"</p></div>"
            return data;
        }
    </script>
</body>
</html>